# Guide Standard — v1.1

**Назначение.** Единый формат «гайдов/стандартов» (интервью, процедур, методик), по которому
*автоматический компилятор* собирает чистый документ из «сырых» заметок, а затем прогоняет
самопроверку (TDD-подход: чек-листы, red flags, acceptance, no-gaps).

---

## Как использовать (для агента/компилятора)
1) Прочитать сырой гайд (например, `prompts/guides/...md`).
2) Сопоставить его содержимое с разделами ниже, удалить повторы/мусор, привести стиль.
3) Сформировать итоговый Markdown по этой структуре.
4) Прогнать: **Quality Checklist → Red Flags → Acceptance → No-Gaps → Self-Review**.
5) Сохранить `.md` и `.index.json` (источники, хеши, версии).

---

## YAML Front-Matter (обязательно)

```yaml
title: "<краткое имя гайда>"
purpose: "<зачем этот гайд>"
audience: "<кто будет использовать>"
persona_types: ["<тип1>", "<тип2>"]
products: ["<продукт1>", "<продукт2>"]
interview_mode: "simulate" # или "external"
min_sessions: 3
max_sessions: 10
allow_followups: true
version: "v1"
last_updated: "YYYY-MM-DD"

Компилятор обязан добавить/нормализовать фронт-маттер: заполнить пустые поля значением TBD.

Обязательная структура разделов
1) Intro

Контекст и краткое описание, почему существует этот гайд.

Когда применять/когда не применять (границы применимости).

2) Definitions

Термины, которые встречаются в гайде (кратко и точно).

3) Inputs & Preconditions

Какие входы нужны (файлы, источники, роли).

Минимальные условия для запуска (например, «есть 3+ пользователей для интервью»).

4) Process (пошаговая процедура)

Нумерованный процесс: шаги 1…N.

Для каждого шага: цель, что сделать, ожидаемый артефакт.

5) Core Questions / Templates

Если это интервью-гайд: список «обязательных» вопросов.

Если это процедура: шаблоны (скрипты, формы, таблицы).

6) Deepening (5 Whys / уточняющие ветки)

Правила углубления (когда и какие «почему» задавать).

Пример 1–2 диалогов-веток.

7) Branching Rules

Условия развилки («если X — делаем A, иначе B»).

Как фиксировать, какую ветку прошли.

8) Evidence Tags

Как помечать факты/цитаты/ссылки (тэги и примеры).

Требование указывать источник (id записи/файла/пользователя).

9) Output Contract Hints

Что должно быть на выходе (ключевые поля итогового JSON/MD).

Ссылка на соответствующий контракт в /contracts/*.schema.json.

10) Safety & Ethics

Запреты, конфиденциальность, согласия пользователей.

Нейтральный тон, отсутствие подталкивающих формулировок.

11) Stop Conditions

Когда останавливаемся (достигнута насыщенность, лимит сессий, качество OK).

12) Quality Checklist (TDD)

 Выполнены все входные условия?

 Заполнен фронт-маттер без «дырок»?

 Пройден весь процесс (Process) без пропусков?

 Есть углубления (5 Whys) там, где нужны?

 Выход соответствует контракту?

 Артефакты трассируемы (источники, тэги доказательств)?

13) Red Flags

Слишком общие формулировки («всем подходит»).

Нет источников/цитат/тегов.

Нет Stop Conditions или они игнорируются.

14) Acceptance Criteria

Документ собран строго по структуре.

Чек-лист «зелёный», red flags «0» или закрыты.

Валиден по контракту; проходит no-gaps.

15) No-Gaps Protocol

Сопоставить «Inputs → Process → Outputs»: нигде не потеряны поля/шаги.

Любая ссылка/артефакт имеет источник.

16) Self-Review & Reflection

Кратко: что получилось хорошо/плохо.

Список улучшений для следующей версии.

17) Versions & Changelog

v1: дата, что изменилось.

v1.1: дата, правки, ссылки на коммиты.