# JTBD WIP

## Обзор правил агрегации JTBD

Данный документ описывает правила агрегации и структурирования Jobs-to-be-Done (JTBD) на основе данных, собранных в ходе AJTBD-интервью.

## Обязательные поля job

### Базовые поля
- **id**: Уникальный идентификатор работы (pattern: ^J-[A-Za-z0-9_-]{3,}$)
- **name**: Название работы (minLength: 3)
- **type**: Тип работы (enum: ["functional", "emotional", "social"])
- **level**: Уровень работы (enum: ["big", "core", "medium", "small", "micro"])
- **level_rationale**: Обоснование уровня (minLength: 5)

### Результаты и доказательства
- **outcomes**: Массив результатов работы (minItems: 1)
  - name: Название результата
  - metric: Метрика измерения
- **evidence_refs**: Ссылки на доказательства (minItems: 1)
  - interview_id: ID интервью (pattern: ^I-[0-9]{4,}$)
  - quote: Цитата из интервью
  - confidence: Уровень уверенности (0-1)

### Метаданные
- **tags**: Массив тегов для категоризации

## Правила консолидации

### Группировка работ
1. **По уровню**: Группируйте работы по Big/Core/Medium/Small/Micro
2. **По типу**: Разделяйте на функциональные, эмоциональные, социальные
3. **По контексту**: Учитывайте ситуационные факторы
4. **По результатам**: Группируйте по ожидаемым исходам

### Объединение похожих работ
**Критерии объединения**:
- Одинаковый уровень и тип
- Похожие результаты
- Схожий контекст выполнения
- Совпадающие evidence_refs

**Правила объединения**:
- Объединяйте только при уверенности > 0.8
- Сохраняйте все evidence_refs
- Обновляйте confidence как среднее взвешенное
- Документируйте процесс объединения

### Валидация работ
**Проверки обязательных полей**:
- Все required поля заполнены
- ID соответствует паттерну
- Level и type из допустимых значений
- Evidence_refs содержат валидные interview_id

**Проверки качества**:
- Level_rationale обоснован
- Outcomes измеримы
- Confidence в допустимом диапазоне
- Tags релевантны

## Запрет на "галлюцинации"

### Правила заполнения
1. **Только из интервью**: Все данные должны быть из реальных интервью
2. **Ссылки на evidence**: Каждое поле должно иметь evidence_refs
3. **Проверка покрытия**: Поле не покрыто мэппингом → TODO
4. **Возврат к фазе**: Недостающие данные → вернуться к соответствующей фазе

### Обработка недостающих данных
**Если поле не покрыто мэппингом**:
1. Поставить TODO в поле
2. Указать требуемую фазу интервью
3. Запланировать дополнительное интервью
4. Не заполнять поле предположениями

**Если отсутствуют evidence_refs**:
1. Проверить соответствие MAPPING
2. Найти релевантную фазу
3. Запланировать уточняющие вопросы
4. Не добавлять данные без подтверждения

## Интеграция с компонентами

### User Template
- Используйте MAPPING_v3_3_to_USER_TEMPLATE.md
- Заполняйте поля согласно маппингу
- Связывайте с evidence_refs

### Evidence Tags
- Маркируйте работы соответствующими тегами
- Используйте теги для валидации
- Связывайте теги с уровнями работ

### Job Levels
- Применяйте классификацию из jtbd_levels_reading.md
- Валидируйте соответствие уровня и типа
- Документируйте обоснование

### RAT Assumptions
- Тестируйте предположения через evidence_refs
- Валидируйте через данные интервью
- Документируйте результаты

## Практические рекомендации

### Создание job-карточки
1. **Начните с evidence_refs**: Соберите все релевантные цитаты
2. **Определите уровень**: По временному горизонту и сложности
3. **Классифицируйте тип**: По мотивации и результату
4. **Сформулируйте название**: Четко и конкретно
5. **Обоснуйте уровень**: Документируйте rationale

### Валидация качества
1. **Проверьте обязательные поля**: Все ли заполнено?
2. **Валидируйте evidence_refs**: Соответствуют ли интервью?
3. **Проверьте соответствие**: Level и type корректны?
4. **Оцените confidence**: Достаточно ли уверенности?

### Консолидация работ
1. **Группируйте по критериям**: Уровень, тип, контекст
2. **Ищите дубликаты**: Похожие работы
3. **Объединяйте осторожно**: Только при высокой уверенности
4. **Документируйте процесс**: Сохраняйте историю изменений

## Контроль качества

### Автоматические проверки
- Валидация обязательных полей
- Проверка паттернов ID
- Валидация enum значений
- Проверка confidence диапазона

### Ручные проверки
- Качество level_rationale
- Релевантность outcomes
- Соответствие evidence_refs
- Корректность tags

### Метрики качества
- **Покрытие полей**: % заполненных обязательных полей
- **Качество evidence**: Средний confidence
- **Соответствие стандартам**: % работ, прошедших валидацию
- **Полнота данных**: % работ с полными evidence_refs

## Заключение

Правила агрегации JTBD обеспечивают:

- **Качество данных**: Строгие требования к заполнению
- **Трассируемость**: Связь с исходными интервью
- **Валидацию**: Автоматические и ручные проверки
- **Консистентность**: Единые правила для всех работ
- **Масштабируемость**: Легкость расширения и адаптации

Правильное применение данных правил гарантирует высокое качество JTBD-данных и надежность продуктовых решений.